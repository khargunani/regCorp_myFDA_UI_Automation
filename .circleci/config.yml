version: '2.1'

orbs:
  cypress: cypress-io/cypress@3.1.4

jobs:
  test:
    docker:
      - image: cypress/browsers:node-18.16.0-chrome-113.0.5672.63-ff-112
    steps:
      - checkout

      - run:
          name: Install dependencies
          command: npm ci

      - run:
          name: Run Cypress in Firefox
          command: npx cypress run --browser firefox --headed --spec "cypress/e2e/Home/FDA_Registarion/FoodFacility/FFViewCeritificates.cy.js"

      - run:
          name: Zip test report
          command: node ./scripts/zipScript.js

      - store_artifacts:
          path: cypress/reports/mochawesome-report/report.zip
          destination: TestReport

workflows:
  run-tests:
    jobs:
      - test
